{% extends "base.html" %}
{% load i18n %}

{% block javascript %}
{{block.super}}
    <script src="{{STATIC_URL}}petition/js/petition.js" type="text/javascript"></script>
{% endblock %}

{% block extra_meta %}
		<meta property="og:title" content="{{ petition.name }}" />
{% endblock %}

{% block title %}
	{{ petition.name }}
{% endblock %}

{% block content %}

    {% if already_signed %}
        <div class="row-fluid">
            <div class="note">
                {% trans 'Your objection against this bill has been noted.' %}
            </div>
        </div>
    {% endif %}

    <div class="row-fluid">
        <div>
        {% if already_signed %}
            {% with p=petition %}
                {% include 'stub/unsign_button.html' %}
            {% endwith %}
        {% else %}
            {% with p=petition %}
                {% include 'stub/sign_button.html' %}
            {% endwith %}
        {% endif %}
        </div>
    </div>

    </div>
    <div class="row-fluid">

        <table class="datatable">
            <tr>
                <th class="username">{% trans 'Civil nr.' %}</th>
                <th class="fullname">{% trans 'Full name' %}</th>
                <th class="timing">{% trans 'Date' %}</th>
            </tr>
            {% for s in signatures %}
                {% if s.show_public %}
                    <tr class="user">
                        <td class="username">{{ s.user.username }}</td>
                        <td class="fullname">{{ s.user.first_name }}</td>
                        <td class="timing">{{ s.date_created|date:'DATE_FORMAT' }}</td>
                    </tr>
                {% else %}
                    <tr class="user">
                        <td class="username">[ fali&eth; ]</td>
                        <td class="fullname">[ fali&eth; ]</td>
                        <td class="timing">{{ s.date_created|date:'DATE_FORMAT' }}</td>
                    </tr>
                {% endif %}
            {% empty %}
                <tr>
                    <td class="align-center" colspan="3">{% trans 'No signatures yet!' %}</td>
                </tr>
            {% endfor %}
        </table>

    </div>
    <div class="row-fluid">

		<div class="petition_detail">
			<h2>{{ petition.name|capfirst }}</h2>
            {% if petition.description %}
                <p class="description">{{ petition.description}}</p>
            {% endif %}
    		<p class="distributed">{% trans 'distributed' %}: {{ petition.timing_published|date:"DATE_FORMAT"|title }}</p>

			<div class="content">
                {{ petition.content|safe }}
			</div>
        </div>

    </div>
    <div class="row-fluid">

        {% if not already_signed %}
            {% with p=petition %}
                {% include 'stub/sign_button.html' %}
            {% endwith %}
        {% else %}
           {% with p=petition %}
                {% include 'stub/unsign_button.html' %}
            {% endwith %}

        {% endif %}
	</div>
{% endblock %}
